import{createApp}from"../vendor/vue.esm-browser.js";export class Browser{static Ready(e){if(document.readyState!=="loading"){e();return}document.addEventListener("DOMContentLoaded",e)}}export class Utils{static KebabCase(e){return e.replace(/([a-z])([A-Z])/g,"$1-$2").replace(/\s+/g,"-").toLowerCase()}}export class App{static Mount(e,t=".app"){Browser.Ready(()=>{const n=createApp({});if(e)for(const t in e){if(!Object.hasOwnProperty.call(e,t))continue;const s=e[t];s.template||(s.template=`#v-${t}`),n.component(t,s)}n.mount(t)})}}export class JsonApi{static async Get(e){return await JsonApi.Call(e,"GET")}static async Post(e,t){return await JsonApi.Call(e,"POST",t)}static async Call(e,t,n){const s={status:"fail"};try{const a={"Content-Type":"application/json"};t==="POST"&&(a["X-PP-CSRF-PROTECTION"]="1");let r={method:t,headers:a};n&&(r.body=JSON.stringify(n));const i=await fetch(e,r);i.status===401&&(s.authRequired=!0);const o=await i.json();s.status=i.status,o&&(o.status&&(s.status=o.status),o.error&&typeof o.error!="number"?s.error=o.error:o.messages&&(s.error=o.messages.error?o.messages.error:o.messages),o.data&&(s.data=o.data))}catch{}return s.ok=s.status==="success",s}}function initLangButtons(){console.log("initLangButtons");const e=document.querySelectorAll(".app-langs button");if(e){const t=e=>{if(!e.target)return;let t=e.target.getAttribute("data-lang");if(!t)return;if(!/^[a-z]{2}(-[A-Z]{2})?$/.test(t))return;let{pathname:n,search:s,hash:o}=window.location;if(!/^\/[a-z]{2}(-[A-Z]{2})?($|\/)+/.test(n)){window.location.replace(`/${t}`);return}n=n.replace(/[^/]+/,t),window.location.replace(`${n}${s}${o}`)};for(const n of e){const s=n.getAttribute("data-lang");if(!s)continue;n.addEventListener("click",t)}}}Browser.Ready(()=>{initLangButtons()})